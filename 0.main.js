(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return T}));var a=n(2),c=n.n(a),s=n(5),i=n.n(s),o=n(8),r=n.n(o),l=n(0),u=n.n(l),d=n(9),p=n.n(d),v=n(4),m=n.n(v),f=n(7),h=n.n(f),b=n(3),y=n.n(b),g=n(6),k=n(1),w=n(10),_=[{type:"text",label:"Username",placeholder:"User Name",status:"",value:"",class:"",required:!0,validate:function(t){return!t||t.length<2},errorMsg:"User name must containe more then 2 characters"},{type:"email",label:"Email",placeholder:"test@test.com",status:"",value:"",class:"",required:!0,validate:function(t){return!t||!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},errorMsg:"Incorent email"},{type:"text",label:"Review",placeholder:"It was sooo good :)",status:"",msg:"",value:"",required:!0,tag:"textarea",validate:function(t){return!t||t.length<10},errorMsg:"Review name must containe more then 10 characters"}],T=function(t){function e(t){var n;c()(this,e),n=r()(this,m()(e).call(this,".main-content")),y()(u()(n),"inputs",_),y()(u()(n),"init",(function(){n.renderHTML(),n.initEvents()})),y()(u()(n),"initEvents",(function(){h()(m()(e.prototype),"select",u()(n)).call(u()(n),".back-btn").onclick=function(){h()(m()(e.prototype),"commit",u()(n)).call(u()(n),k.a.BACK_TO_MAIN_PAGE)},h()(m()(e.prototype),"listen",u()(n)).call(u()(n),k.a.BACK_TO_FILM_PAGE,n.renderHTML);var t=h()(m()(e.prototype),"select",u()(n)).call(u()(n),".form"),a=h()(m()(e.prototype),"select",u()(n)).call(u()(n),".form__reset-btn");t.onsubmit=function(a){a.preventDefault();var c=!0;n.inputs=n.inputs.map((function(t){var a=h()(m()(e.prototype),"select",u()(n)).call(u()(n),"".concat(t.tag||"input","[type='").concat(t.type,"']")).value;return t.value=a,t.validate(a)?(c=!1,t.status="is-danger",t.msg=t.errorMsg):(t.status="is-success",t.msg=""),t})),n.reRenderForm(t),c&&(n.setInputFileds({disabed:!0},t),g.c.submitForm().then((function(e){var a=n.inputs.map((function(t){return t}));n.showSubmitStatus("success",a),n.setInputFileds({disabed:!1,value:"",status:""},t)})).catch((function(e){console.error(e),n.setInputFileds({disabed:!1},t)})))},a.onclick=function(){n.inputs=_,n.init()},["modal-close","modal-background"].forEach((function(t){h()(m()(e.prototype),"select",u()(n)).call(u()(n),".".concat(t)).onclick=function(){return n.toggleModalVisibility(!1)}}))}));var a=h()(m()(e.prototype),"getFromLS",u()(n)).call(u()(n),"list");return n.film=a.find((function(e){return e.episode_id===+t})),n}return p()(e,t),i()(e,[{key:"modalTemplate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<div class="modal">\n    <div class="modal-background"></div>\n    <div class="modal-content has-background-white pa-2">\n      '.concat(t,'\n    </div>\n    <button class="modal-close is-large" aria-label="close"></button>\n  </div>')}},{key:"formTemaplate",value:function(){var t=this.inputs.reduce((function(t,e){var n=e.type,a=e.label,c=e.placeholder,s=e.status,i=e.value,o=e.required,r=e.msg,l=e.tag,u=e.disabled,d='<div class="field">\n      <label class="label">'.concat(a,'</label>\n      <div class="control">\n        <').concat(l||"input",' \n          class="input ').concat(s," ").concat(l,'" \n          type="').concat(n,'" \n          placeholder="').concat(c,'" \n          value="').concat(i,'" \n          ').concat(o?"required":"","\n          ").concat(u?"disabled":"","\n        >").concat(l?"".concat(i," </").concat(l,">"):"",'\n      </div>\n      <p class="help ').concat(s,'">').concat(r||"","</p>\n    </div>");return"".concat(t).concat(d)}),"");return'\n      <form class="form">\n        '.concat(t,'\n        <div class="field is-grouped">\n          <div class="control">\n            <button class="button is-primary form__submit-btn">Submit</button>\n          </div>\n          <div class="control">\n            <button class="button is-primary is-light form__reset-btn" type="reset">Cancel</button>\n          </div>\n        </div>\n      </form>')}},{key:"reviewTemplate",value:function(t){var e=t.title,n=(t.episode_id,t.director,t.producer,t.opening_crawl);t.release_date;return'\n    <div class="content is-large has-text-left">\n      <p>'.concat(n,"</p>\n      <h3>Reveiw ").concat(e,"</h3>\n      ").concat(this.formTemaplate(),"\n      ").concat(this.modalTemplate(),"\n    </div>\n    ")}},{key:"renderHTML",value:function(){h()(m()(e.prototype),"setTitleAndSubtitle",this).call(this,this.film.title,"Director: ".concat(this.film.director));var t='\n    <div class="container px-4">\n      <div class="is-flex is-justify-content-flex-start">\n        <button class="back-btn is-primary button mb-4">Back</button>\n      </div>\n      '.concat(this.reviewTemplate(this.film),"\n    </div>\n    ");h()(m()(e.prototype),"render",this).call(this,"".concat(t))}},{key:"toggleModalVisibility",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="is-active",c=h()(m()(e.prototype),"select",this).call(this,".modal");t?c.classList.add(a):c.classList.remove(a);var s=c.querySelector(".modal-content");h()(m()(e.prototype),"render",this).call(this,t?n:"",s)}},{key:"reRenderForm",value:function(t){h()(m()(e.prototype),"render",this).call(this,this.formTemaplate(),t)}},{key:"setInputFileds",value:function(t,e){this.inputs=this.inputs.map((function(e){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e})),this.reRenderForm(e)}},{key:"showSubmitStatus",value:function(t,e){var n='<div class="content p-5 is-large">\n    <h3 class="mt-0 '.concat({success:"has-text-success",error:"has-text-danger"}[t],'"> ').concat(t.toUpperCase(),"</h3>\n    <p>").concat(e.map((function(t){return"".concat(t.value)})).join(" "),"</p>\n  </div>");this.toggleModalVisibility(!0,n)}}]),e}(w.a)}}]);